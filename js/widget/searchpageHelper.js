define("widget/searchpageHelper",["lib/common","model/CommodityDisplay/CommodityDisplayModel","config/url"],function(e,t,n){function r(){var n='<div class="search_page"><div class="touchweb_header"><a class="hd_left hd_back search_width" id="search_back"><i class="iconfont">&#xe606;</i></a><div class="hd_title hd_search"><span><i class="icon iconfont">&#xe616;</i></span> <input type="text" placeholder="搜索" id="search_text"></div><div class="hd_right" id="search_product"><a class="hd_btn">搜索</a></div></div><div class="search_list"><ul></ul></div></div>';e("body").append(n);var r="";e("#search_text").on("input propertychange",function(){var n=e(this).val();clearTimeout(r),r=setTimeout(function(){var r={post:{word:n,hit:10}};t.GetGoodsSearchStatistics(r,function(t){e(".search_list ul").html("");if(!e.isNull(t.data.suggestions)&&t.data.suggestions.length>0){for(var n=0;n<t.data.suggestions.length;n++){var r='<li><div class="list_item"><label>{0}</label><label>约{1}条商品</label></div></li>';r=r.format(t.data.suggestions[n].keyword,t.data.suggestions[n].count),e(".search_list ul").append(r)}e(".list_item").on("click",function(){var t={k:e(this).find("label:first-child").html()};e.url.redirect(e.url.getDomainUrl()+"Search?"+e.param(t,!0))})}})},500)}),e("#ckSearch").focus(function(){e(".search_page").show().removeClass("sidebarhide").addClass("sidebarshow"),e("body").addClass("disablescroll"),e("#search_text").focus()}),e("#search_back").click(function(){e(".search_page").removeClass("sidebarshow").addClass("sidebarhide"),e("body").removeClass("disablescroll"),e("#search_text").blur()}),e("#search_product").on("click",function(){var t={k:e("#search_text").val()};e.url.redirect(e.url.getDomainUrl()+"Search?"+e.param(t,!0))})}return document.onkeydown=function(t){var n=document.all?window.event:t;if(n.keyCode==13){var r={k:e("#search_text").val()};e.url.redirect(e.url.getDomainUrl()+"Search?"+e.param(r,!0))}},{searchPage:r}});